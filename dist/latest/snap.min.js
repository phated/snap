/*! Snap.js v2.0.0 */
"use strict";var win=window,doc=document,utils={extend:function(a,b){var c;for(c in b)b[c]&&b[c].constructor&&b[c].constructor===Object?(a[c]=a[c]||{},utils.extend(a[c],b[c])):a[c]=b[c];return a}},Core=function(a){var b=this,c=b.settings={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,clickToDrag:!0,slideIntent:40,minDragDistance:5},d=b.cache={isDragging:!1,simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},e=b.eventList={};utils.extend(utils,{hasTouch:"ontouchstart"in doc.documentElement||win.navigator.msPointerEnabled,eventType:function(a){var b={down:utils.hasTouch?"touchstart":c.clickToDrag?"mousedown":"",move:utils.hasTouch?"touchmove":c.clickToDrag?"mousemove":"",up:utils.hasTouch?"touchend":c.clickToDrag?"mouseup":"",out:utils.hasTouch?"touchcancel":c.clickToDrag?"mouseout":""};return b[a]},page:function(a,b){return utils.hasTouch&&b.touches.length&&b.touches[0]?b.touches[0]["page"+a]:b["page"+a]},klass:{has:function(a,b){return-1!==a.className.indexOf(b)},add:function(a,b){!utils.klass.has(a,b)&&c.addBodyClasses&&(a.className+=" "+b)},remove:function(a,b){utils.klass.has(a,b)&&c.addBodyClasses&&(a.className=a.className.replace(b,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(a){return"function"==typeof e[a]?e[a].apply():void 0},vendor:function(){var a,b=doc.createElement("div"),c="webkit Moz O ms".split(" ");for(a in c)if("undefined"!=typeof b.style[c[a]+"Transition"])return c[a]},transitionCallback:function(){return"Moz"===d.vendor||"ms"===d.vendor?"transitionend":d.vendor+"TransitionEnd"},canTransform:function(){return"undefined"!=typeof c.element.style[d.vendor+"Transform"]},angleOfDrag:function(a,b){var c,e;return e=Math.atan2(-(d.startDragY-b),d.startDragX-a),0>e&&(e+=2*Math.PI),c=Math.floor(e*(180/Math.PI)-180),0>c&&c>-180&&(c=360-Math.abs(c)),Math.abs(c)},events:{addEvent:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):void 0},removeEvent:function(a,b,c){return a.addEventListener?a.removeEventListener(b,c,!1):a.attachEvent?a.detachEvent("on"+b,c):void 0},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}},parentUntil:function(a,b){for(var c="string"==typeof b;a.parentNode;){if(c&&a.getAttribute&&a.getAttribute(b))return a;if(!c&&a===b)return a;a=a.parentNode}return null}});var f=b.action={translate:{get:{matrix:function(a){if(d.canTransform){var b=win.getComputedStyle(c.element)[d.vendor+"Transform"].match(/\((.*)\)/),e=8;return b?(b=b[1].split(","),16===b.length&&(a+=e),parseInt(b[a],10)):0}return parseInt(c.element.style.left,10)}},easeCallback:function(){c.element.style[d.vendor+"Transition"]="",d.translation=f.translate.get.matrix(4),d.easing=!1,0===d.easingTo&&(utils.klass.remove(doc.body,"snapjs-right"),utils.klass.remove(doc.body,"snapjs-left")),d.once&&(d.once.call(b,b.state()),delete d.once),utils.dispatchEvent("animated"),utils.events.removeEvent(c.element,utils.transitionCallback(),f.translate.easeCallback)},easeTo:function(a,b){d.canTransform?(d.easing=!0,d.easingTo=a,c.element.style[d.vendor+"Transition"]="all "+c.transitionSpeed+"s "+c.easing,d.once=b,utils.events.addEvent(c.element,utils.transitionCallback(),f.translate.easeCallback),f.translate.x(a)):(d.translation=a,f.translate.x(a)),0===a&&(c.element.style[d.vendor+"Transform"]="")},x:function(a){if(!("left"===c.disable&&a>0||"right"===c.disable&&0>a))if(c.hyperextensible||(a===c.maxPosition||a>c.maxPosition?a=c.maxPosition:(a===c.minPosition||a<c.minPosition)&&(a=c.minPosition)),a=parseInt(a,10),isNaN(a)&&(a=0),d.canTransform){var b="translate3d("+a+"px, 0,0)";c.element.style[d.vendor+"Transform"]=b}else c.element.style.width=(win.innerWidth||doc.documentElement.clientWidth)+"px",c.element.style.left=a+"px",c.element.style.right=""}},drag:{listen:function(){d.translation=0,d.easing=!1,utils.events.addEvent(b.settings.element,utils.eventType("down"),f.drag.startDrag),utils.events.addEvent(b.settings.element,utils.eventType("move"),f.drag.dragging),utils.events.addEvent(b.settings.element,utils.eventType("up"),f.drag.endDrag)},stopListening:function(){utils.events.removeEvent(c.element,utils.eventType("down"),f.drag.startDrag),utils.events.removeEvent(c.element,utils.eventType("move"),f.drag.dragging),utils.events.removeEvent(c.element,utils.eventType("up"),f.drag.endDrag)},startDrag:function(a){var b=a.target?a.target:a.srcElement,e=utils.parentUntil(b,"data-snap-ignore");if(e)return void utils.dispatchEvent("ignore");if(c.dragger){var f=utils.parentUntil(b,c.dragger);if(!f&&d.translation!==c.minPosition&&d.translation!==c.maxPosition)return}utils.dispatchEvent("start"),c.element.style[d.vendor+"Transition"]="",d.isDragging=!0,d.intentChecked=!1,d.startDragX=utils.page("X",a),d.startDragY=utils.page("Y",a),d.dragWatchers={current:0,last:0,hold:0,state:""},d.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(a){if(d.isDragging&&c.touchToDrag){var b,e=utils.page("X",a),g=utils.page("Y",a),h=d.translation,i=f.translate.get.matrix(4),j=e-d.startDragX,k=i>0,l=j;if(d.intentChecked&&!d.hasIntent)return;if(c.addBodyClasses&&(i>0?(utils.klass.add(doc.body,"snapjs-left"),utils.klass.remove(doc.body,"snapjs-right")):0>i&&(utils.klass.add(doc.body,"snapjs-right"),utils.klass.remove(doc.body,"snapjs-left"))),d.hasIntent===!1||null===d.hasIntent){var m=utils.angleOfDrag(e,g),n=m>=0&&m<=c.slideIntent||360>=m&&m>360-c.slideIntent,o=m>=180&&m<=180+c.slideIntent||180>=m&&m>=180-c.slideIntent;d.hasIntent=o||n?!0:!1,d.intentChecked=!0}if(c.minDragDistance>=Math.abs(e-d.startDragX)||d.hasIntent===!1)return;utils.events.prevent(a),utils.dispatchEvent("drag"),d.dragWatchers.current=e,d.dragWatchers.last>e?("left"!==d.dragWatchers.state&&(d.dragWatchers.state="left",d.dragWatchers.hold=e),d.dragWatchers.last=e):d.dragWatchers.last<e&&("right"!==d.dragWatchers.state&&(d.dragWatchers.state="right",d.dragWatchers.hold=e),d.dragWatchers.last=e),k?(c.maxPosition<i&&(b=(i-c.maxPosition)*c.resistance,l=j-b),d.simpleStates={opening:"left",towards:d.dragWatchers.state,hyperExtending:c.maxPosition<i,halfway:i>c.maxPosition/2,flick:Math.abs(d.dragWatchers.current-d.dragWatchers.hold)>c.flickThreshold,translation:{absolute:i,relative:j,sinceDirectionChange:d.dragWatchers.current-d.dragWatchers.hold,percentage:i/c.maxPosition*100}}):(c.minPosition>i&&(b=(i-c.minPosition)*c.resistance,l=j-b),d.simpleStates={opening:"right",towards:d.dragWatchers.state,hyperExtending:c.minPosition>i,halfway:i<c.minPosition/2,flick:Math.abs(d.dragWatchers.current-d.dragWatchers.hold)>c.flickThreshold,translation:{absolute:i,relative:j,sinceDirectionChange:d.dragWatchers.current-d.dragWatchers.hold,percentage:i/c.minPosition*100}}),f.translate.x(l+h)}},endDrag:function(a){if(d.isDragging){utils.dispatchEvent("end");var b=f.translate.get.matrix(4);if(0===d.dragWatchers.current&&0!==b&&c.tapToClose)return utils.dispatchEvent("close"),utils.events.prevent(a),f.translate.easeTo(0),d.isDragging=!1,void(d.startDragX=0);"left"===d.simpleStates.opening?d.simpleStates.halfway||d.simpleStates.hyperExtending||d.simpleStates.flick?d.simpleStates.flick&&"left"===d.simpleStates.towards?f.translate.easeTo(0):(d.simpleStates.flick&&"right"===d.simpleStates.towards||d.simpleStates.halfway||d.simpleStates.hyperExtending)&&f.translate.easeTo(c.maxPosition):f.translate.easeTo(0):"right"===d.simpleStates.opening&&(d.simpleStates.halfway||d.simpleStates.hyperExtending||d.simpleStates.flick?d.simpleStates.flick&&"right"===d.simpleStates.towards?f.translate.easeTo(0):(d.simpleStates.flick&&"left"===d.simpleStates.towards||d.simpleStates.halfway||d.simpleStates.hyperExtending)&&f.translate.easeTo(c.minPosition):f.translate.easeTo(0)),d.isDragging=!1,d.startDragX=utils.page("X",a)}}}};a.element&&(utils.extend(c,a),d.vendor=utils.vendor(),d.canTransform=utils.canTransform(),f.drag.listen())};utils.extend(Core.prototype,{open:function(a,b){utils.dispatchEvent("open"),utils.klass.remove(doc.body,"snapjs-expand-left"),utils.klass.remove(doc.body,"snapjs-expand-right"),"left"===a?(this.cache.simpleStates.opening="left",this.cache.simpleStates.towards="right",utils.klass.add(doc.body,"snapjs-left"),utils.klass.remove(doc.body,"snapjs-right"),this.action.translate.easeTo(this.settings.maxPosition,b)):"right"===a&&(this.cache.simpleStates.opening="right",this.cache.simpleStates.towards="left",utils.klass.remove(doc.body,"snapjs-left"),utils.klass.add(doc.body,"snapjs-right"),this.action.translate.easeTo(this.settings.minPosition,b))},close:function(a){utils.dispatchEvent("close"),this.action.translate.easeTo(0,a)},expand:function(a){var b=win.innerWidth||doc.documentElement.clientWidth;"left"===a?(utils.dispatchEvent("expandLeft"),utils.klass.add(doc.body,"snapjs-expand-left"),utils.klass.remove(doc.body,"snapjs-expand-right")):(utils.dispatchEvent("expandRight"),utils.klass.add(doc.body,"snapjs-expand-right"),utils.klass.remove(doc.body,"snapjs-expand-left"),b*=-1),this.action.translate.easeTo(b)},on:function(a,b){return this.eventList[a]=b,this},off:function(a){this.eventList[a]&&(this.eventList[a]=!1)},enable:function(){utils.dispatchEvent("enable"),this.action.drag.listen()},disable:function(){utils.dispatchEvent("disable"),this.action.drag.stopListening()},settings:function(a){utils.extend(this.settings,a)},state:function(){var a,b=this.action.translate.get.matrix(4);return a=b===this.settings.maxPosition?"left":b===this.settings.minPosition?"right":"closed",{state:a,info:this.cache.simpleStates}}}),module.exports=Core;